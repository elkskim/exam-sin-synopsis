========================================
Docker Deployment Test
========================================

[1/5] Cleaning up existing containers...
Cleanup complete

[2/5] Building Docker images...
time="2025-12-12T15:05:14+01:00" level=warning msg="C:\\Users\\elksk\\Documents\\rimeligt legit skolesager\\Programmeringsprojekter\\SIN\\exam-sin-synopsis\\Ymyzon\\docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
#1 [internal] load local bake definitions
#1 reading from stdin 1.45kB done
#1 DONE 0.0s

#2 [inventory-service internal] load build definition from Dockerfile
#2 transferring dockerfile: 680B done
#2 DONE 0.1s

#3 [order-service internal] load build definition from Dockerfile
#3 transferring dockerfile: 672B done
#3 DONE 0.2s

#4 [inventory-service internal] load metadata for mcr.microsoft.com/dotnet/sdk:9.0
#4 DONE 0.1s

#5 [order-service internal] load metadata for mcr.microsoft.com/dotnet/aspnet:9.0
#5 DONE 0.1s

#6 [order-service internal] load .dockerignore
#6 transferring context: 422B done
#6 DONE 0.0s

#7 [order-service internal] load build context
#7 DONE 0.0s

#8 [order-service runtime 1/3] FROM mcr.microsoft.com/dotnet/aspnet:9.0@sha256:5df8845a131ee13af686c2096ac2d8b1e91b537288cb5a63c5325b2df4f7d184
#8 resolve mcr.microsoft.com/dotnet/aspnet:9.0@sha256:5df8845a131ee13af686c2096ac2d8b1e91b537288cb5a63c5325b2df4f7d184
#8 resolve mcr.microsoft.com/dotnet/aspnet:9.0@sha256:5df8845a131ee13af686c2096ac2d8b1e91b537288cb5a63c5325b2df4f7d184 0.1s done
#8 DONE 0.1s

#9 [inventory-service internal] load .dockerignore
#9 transferring context: 34B done
#9 DONE 0.0s

#10 [order-service build 1/6] FROM mcr.microsoft.com/dotnet/sdk:9.0@sha256:6c7713b7d107f743015b863f6bb028fca7430192140536779c0464f1ece899bc
#10 resolve mcr.microsoft.com/dotnet/sdk:9.0@sha256:6c7713b7d107f743015b863f6bb028fca7430192140536779c0464f1ece899bc 0.1s done
#10 DONE 0.1s

#11 [inventory-service build 2/6] WORKDIR /src
#11 CACHED

#12 [inventory-service runtime 2/3] WORKDIR /app
#12 CACHED

#13 [inventory-service internal] load build context
#13 transferring context: 3.77kB done
#13 DONE 0.0s

#7 [order-service internal] load build context
#7 transferring context: 605B done
#7 DONE 0.0s

#14 [inventory-service build 3/6] COPY InventoryService.csproj .
#14 DONE 0.1s

#15 [order-service build 3/6] COPY OrderService.csproj .
#15 DONE 0.2s

#16 [inventory-service build 4/6] RUN dotnet restore
#16 1.109   Determining projects to restore...
#16 2.546   Restored /src/InventoryService.csproj (in 1.11 sec).
#16 DONE 2.6s

#17 [order-service build 4/6] RUN dotnet restore
#17 1.015   Determining projects to restore...
#17 2.455   Restored /src/OrderService.csproj (in 1.12 sec).
#17 DONE 2.5s

#18 [order-service build 5/6] COPY . .
#18 DONE 0.1s

#19 [inventory-service build 5/6] COPY . .
#19 DONE 0.1s

#20 [inventory-service build 6/6] RUN dotnet publish -c Release -o /app/publish
#20 1.152   Determining projects to restore...
#20 1.865   Restored /src/InventoryService.csproj (in 364 ms).
#20 ...

#21 [order-service build 6/6] RUN dotnet publish -c Release -o /app/publish
#21 1.202   Determining projects to restore...
#21 1.621   All projects are up-to-date for restore.
#21 4.368 /src/Models/Order.cs(6,19): warning CS8618: Non-nullable property 'ProductName' must contain a non-null value when exiting constructor. Consider adding the 'required' modifier or declaring the property as nullable. [/src/OrderService.csproj]
#21 4.519   OrderService -> /src/bin/Release/net9.0/OrderService.dll
#21 4.575   OrderService -> /app/publish/
#21 DONE 4.7s

#22 [order-service runtime 3/3] COPY --from=build /app/publish .
#22 DONE 0.1s

#23 [order-service] exporting to image
#23 exporting layers
#23 ...

#20 [inventory-service build 6/6] RUN dotnet publish -c Release -o /app/publish
#20 4.707   InventoryService -> /src/bin/Release/net9.0/InventoryService.dll
#20 4.776   InventoryService -> /app/publish/
#20 DONE 4.9s

#23 [order-service] exporting to image
#23 exporting layers 0.2s done
#23 exporting manifest sha256:e85108368ae35718431b19455ae8d96a752d2db5ae8b101c659d0ff2c3e07c55 0.0s done
#23 exporting config sha256:3c2c520dc6b45103c92805ba2e515414d9eb89a7049ed6afdcceaa6ea415f50d 0.0s done
#23 exporting attestation manifest sha256:ee2a8255d27858b6b4b8db46efbebf5ffb5a14fd0d52413669cccf94ae6e53a8
#23 ...

#24 [inventory-service runtime 3/3] COPY --from=build /app/publish .
#24 DONE 0.1s

#23 [order-service] exporting to image
#23 exporting attestation manifest sha256:ee2a8255d27858b6b4b8db46efbebf5ffb5a14fd0d52413669cccf94ae6e53a8 0.1s done
#23 exporting manifest list sha256:0a2fa7112f3c7dfafb67454f9accf82267d51a9cae6ee4f1442d94041bb7fdf3 0.0s done
#23 naming to docker.io/library/ymyzon-order-service:latest done
#23 unpacking to docker.io/library/ymyzon-order-service:latest
#23 unpacking to docker.io/library/ymyzon-order-service:latest 0.1s done
#23 DONE 0.5s

#25 [inventory-service] exporting to image
#25 exporting layers 0.2s done
#25 exporting manifest sha256:8aa6cc7bacc44aa68ecf0ebddfff56450be66dd5bf79fc51986755e7c1282408 0.0s done
#25 exporting config sha256:a2d5e355ada1d068419b13f781c2ed97ff706b83cda726b3d5fb4edc7d444694 0.0s done
#25 exporting attestation manifest sha256:335baffec6e94ec0f260449cf1203939b05f2039fa63f07ec61b4798e7f99341 0.1s done
#25 exporting manifest list sha256:f3ffc6c421f8095cd21809b0c5c67674d4dee056e5d58b39bbd2dd54279dbe38
#25 ...

#26 [order-service] resolving provenance for metadata file
#26 DONE 0.0s

#25 [inventory-service] exporting to image
#25 exporting manifest list sha256:f3ffc6c421f8095cd21809b0c5c67674d4dee056e5d58b39bbd2dd54279dbe38 0.0s done
#25 naming to docker.io/library/ymyzon-inventory-service:latest done
#25 unpacking to docker.io/library/ymyzon-inventory-service:latest 0.1s done
#25 DONE 0.5s

#27 [inventory-service] resolving provenance for metadata file
#27 DONE 0.0s
 ymyzon-order-service  Built
 ymyzon-inventory-service  Built
Build completed in 10 seconds

[3/5] Starting services...
time="2025-12-12T15:05:24+01:00" level=warning msg="C:\\Users\\elksk\\Documents\\rimeligt legit skolesager\\Programmeringsprojekter\\SIN\\exam-sin-synopsis\\Ymyzon\\docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
 Network ymyzon_ymyzon-network  Creating
 Network ymyzon_ymyzon-network  Created
 Container ymyzon-rabbitmq  Creating
 Container ymyzon-rabbitmq  Created
 Container ymyzon-order  Creating
 Container ymyzon-inventory  Creating
 Container ymyzon-order  Created
 Container ymyzon-inventory  Created
 Container ymyzon-rabbitmq  Starting
 Container ymyzon-rabbitmq  Started
 Container ymyzon-rabbitmq  Waiting
 Container ymyzon-rabbitmq  Waiting
 Container ymyzon-rabbitmq  Healthy
 Container ymyzon-inventory  Starting
 Container ymyzon-rabbitmq  Healthy
 Container ymyzon-order  Starting
 Container ymyzon-inventory  Started
 Container ymyzon-order  Started
Services started in 12 seconds

[4/5] Waiting for services to be healthy...
[5/5] Running health checks...

✓ InventoryService: Healthy
✓ OrderService: Healthy

========================================
Deployment Metrics
========================================
Build Time:      10 seconds
Deploy Time:     12 seconds
Total Time:      52 seconds
========================================

Services are running!
RabbitMQ UI: http://localhost:15672 (guest/guest)
InventoryService: http://localhost:5219
OrderService: http://localhost:5194

To test: bash test-docker.sh
To stop: docker-compose down
