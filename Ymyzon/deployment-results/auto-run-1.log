========================================
Docker Deployment Test
========================================

[1/5] Cleaning up existing containers...
Removing standalone RabbitMQ container...
Cleanup complete

[2/5] Building Docker images...
time="2025-12-12T15:04:13+01:00" level=warning msg="C:\\Users\\elksk\\Documents\\rimeligt legit skolesager\\Programmeringsprojekter\\SIN\\exam-sin-synopsis\\Ymyzon\\docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
#1 [internal] load local bake definitions
#1 reading from stdin 1.45kB done
#1 DONE 0.0s

#2 [order-service internal] load build definition from Dockerfile
#2 transferring dockerfile: 672B done
#2 DONE 0.0s

#3 [inventory-service internal] load build definition from Dockerfile
#3 transferring dockerfile: 680B done
#3 DONE 0.0s

#4 [inventory-service internal] load metadata for mcr.microsoft.com/dotnet/aspnet:9.0
#4 DONE 0.2s

#5 [inventory-service internal] load metadata for mcr.microsoft.com/dotnet/sdk:9.0
#5 DONE 0.2s

#6 [inventory-service internal] load .dockerignore
#6 transferring context: 34B done
#6 DONE 0.0s

#7 [order-service internal] load .dockerignore
#7 transferring context: 422B done
#7 DONE 0.0s

#8 [inventory-service internal] load build context
#8 DONE 0.0s

#9 [order-service internal] load build context
#9 DONE 0.0s

#10 [inventory-service runtime 1/3] FROM mcr.microsoft.com/dotnet/aspnet:9.0@sha256:5df8845a131ee13af686c2096ac2d8b1e91b537288cb5a63c5325b2df4f7d184
#10 resolve mcr.microsoft.com/dotnet/aspnet:9.0@sha256:5df8845a131ee13af686c2096ac2d8b1e91b537288cb5a63c5325b2df4f7d184 0.1s done
#10 DONE 0.1s

#11 [inventory-service runtime 2/3] WORKDIR /app
#11 CACHED

#12 [order-service build 1/6] FROM mcr.microsoft.com/dotnet/sdk:9.0@sha256:6c7713b7d107f743015b863f6bb028fca7430192140536779c0464f1ece899bc
#12 resolve mcr.microsoft.com/dotnet/sdk:9.0@sha256:6c7713b7d107f743015b863f6bb028fca7430192140536779c0464f1ece899bc
#12 resolve mcr.microsoft.com/dotnet/sdk:9.0@sha256:6c7713b7d107f743015b863f6bb028fca7430192140536779c0464f1ece899bc 0.1s done
#12 DONE 0.1s

#13 [order-service build 2/6] WORKDIR /src
#13 CACHED

#9 [order-service internal] load build context
#9 transferring context: 605B done
#9 DONE 0.0s

#8 [inventory-service internal] load build context
#8 transferring context: 3.77kB done
#8 DONE 0.0s

#14 [order-service build 3/6] COPY OrderService.csproj .
#14 DONE 0.1s

#15 [inventory-service build 3/6] COPY InventoryService.csproj .
#15 DONE 0.1s

#16 [inventory-service build 4/6] RUN dotnet restore
#16 1.414   Determining projects to restore...
#16 2.909   Restored /src/InventoryService.csproj (in 1.11 sec).
#16 DONE 3.0s

#17 [order-service build 4/6] RUN dotnet restore
#17 1.429   Determining projects to restore...
#17 2.927   Restored /src/OrderService.csproj (in 1.11 sec).
#17 DONE 3.0s

#18 [inventory-service build 5/6] COPY . .
#18 ...

#19 [order-service build 5/6] COPY . .
#19 DONE 0.1s

#18 [inventory-service build 5/6] COPY . .
#18 DONE 0.2s

#20 [inventory-service build 6/6] RUN dotnet publish -c Release -o /app/publish
#20 1.132   Determining projects to restore...
#20 1.821   Restored /src/InventoryService.csproj (in 319 ms).
#20 ...

#21 [order-service build 6/6] RUN dotnet publish -c Release -o /app/publish
#21 1.144   Determining projects to restore...
#21 1.560   All projects are up-to-date for restore.
#21 4.604 /src/Models/Order.cs(6,19): warning CS8618: Non-nullable property 'ProductName' must contain a non-null value when exiting constructor. Consider adding the 'required' modifier or declaring the property as nullable. [/src/OrderService.csproj]
#21 4.732   OrderService -> /src/bin/Release/net9.0/OrderService.dll
#21 4.784   OrderService -> /app/publish/
#21 DONE 4.9s

#20 [inventory-service build 6/6] RUN dotnet publish -c Release -o /app/publish
#20 4.740   InventoryService -> /src/bin/Release/net9.0/InventoryService.dll
#20 4.795   InventoryService -> /app/publish/
#20 DONE 5.0s

#22 [inventory-service runtime 3/3] COPY --from=build /app/publish .
#22 DONE 0.1s

#23 [order-service runtime 3/3] COPY --from=build /app/publish .
#23 DONE 0.1s

#24 [order-service] exporting to image
#24 exporting layers
#24 exporting layers 0.2s done
#24 exporting manifest sha256:e237b11985dcbf04c58be2c15aabf6b58549acd0c0297a9dae2516f6722244c0 0.0s done
#24 exporting config sha256:46cb05130a37c023e41e0fdebe606eb5e7082169539438e5042c870b708aec0d 0.0s done
#24 exporting attestation manifest sha256:6c0358c999b0664e060b06cf94080596de4f219a3e2c922578446928ea74e3b8 0.1s done
#24 exporting manifest list sha256:ef894fcc87b39b6cdccc2866835143a18f3f6a7e1aa75e23de79bcc7aab3511f
#24 exporting manifest list sha256:ef894fcc87b39b6cdccc2866835143a18f3f6a7e1aa75e23de79bcc7aab3511f 0.0s done
#24 naming to docker.io/library/ymyzon-order-service:latest done
#24 unpacking to docker.io/library/ymyzon-order-service:latest 0.1s done
#24 DONE 0.5s

#25 [inventory-service] exporting to image
#25 exporting layers 0.2s done
#25 exporting manifest sha256:34c77b29845b0afc216ef736778087687cc50582b7c0f3c94894f0080ebb96c0 0.0s done
#25 exporting config sha256:2a8b17ed863c23e71bfdaa2406b4e563db5a5a2c3ee5aa3cb08369b6085bb1a6 0.0s done
#25 exporting attestation manifest sha256:b31f7059610fd16a00f5b2bb796bb98f578acbc631ebffc36f4c4b5d9d4d36e3 0.1s done
#25 exporting manifest list sha256:e3f6f5ae9fc455714e1a19c69475cfbbc672bb162c1259d9455632a200e3160f 0.0s done
#25 naming to docker.io/library/ymyzon-inventory-service:latest 0.0s done
#25 unpacking to docker.io/library/ymyzon-inventory-service:latest 0.1s done
#25 DONE 0.6s

#26 [order-service] resolving provenance for metadata file
#26 DONE 0.0s

#27 [inventory-service] resolving provenance for metadata file
#27 DONE 0.0s
 ymyzon-inventory-service  Built
 ymyzon-order-service  Built
Build completed in 10 seconds

[3/5] Starting services...
time="2025-12-12T15:04:24+01:00" level=warning msg="C:\\Users\\elksk\\Documents\\rimeligt legit skolesager\\Programmeringsprojekter\\SIN\\exam-sin-synopsis\\Ymyzon\\docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
 Network ymyzon_ymyzon-network  Creating
 Network ymyzon_ymyzon-network  Created
 Container ymyzon-rabbitmq  Creating
 Container ymyzon-rabbitmq  Created
 Container ymyzon-inventory  Creating
 Container ymyzon-order  Creating
 Container ymyzon-order  Created
 Container ymyzon-inventory  Created
 Container ymyzon-rabbitmq  Starting
 Container ymyzon-rabbitmq  Started
 Container ymyzon-rabbitmq  Waiting
 Container ymyzon-rabbitmq  Waiting
 Container ymyzon-rabbitmq  Healthy
 Container ymyzon-inventory  Starting
 Container ymyzon-rabbitmq  Healthy
 Container ymyzon-order  Starting
 Container ymyzon-order  Started
 Container ymyzon-inventory  Started
Services started in 13 seconds

[4/5] Waiting for services to be healthy...
[5/5] Running health checks...

✓ InventoryService: Healthy
✓ OrderService: Healthy

========================================
Deployment Metrics
========================================
Build Time:      10 seconds
Deploy Time:     13 seconds
Total Time:      56 seconds
========================================

Services are running!
RabbitMQ UI: http://localhost:15672 (guest/guest)
InventoryService: http://localhost:5219
OrderService: http://localhost:5194

To test: bash test-docker.sh
To stop: docker-compose down
